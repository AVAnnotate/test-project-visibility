import{j as d}from"./jsx-runtime.B6N9iRLn.js";import{r as n,R as b}from"./index.DNi1g-pO.js";import{l as J,j as fe,H as me,i as F,c as ve,u as ee,p as be}from"./use-server-handoff-complete.BXIqNzS3.js";import{n as N,M as ge,W as D,y as te,O as y,o as E,m as we,t as xe,H as ne,s as pe,u as re}from"./use-sync-refs.D0KZ01Xc.js";import{F as $e}from"./XMarkIcon.2w2G2u9O.js";function je({title:e,titleId:t,...r},s){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Ce=n.forwardRef(je);function Ee(){let e=n.useRef(!1);return N(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function le(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:se)!==n.Fragment||b.Children.count(e.children)===1}let U=n.createContext(null);U.displayName="TransitionContext";var Re=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Re||{});function Te(){let e=n.useContext(U);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function ye(){let e=n.useContext(A);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let A=n.createContext(null);A.displayName="NestingContext";function I(e){return"children"in e?I(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function ie(e,t){let r=pe(e),s=n.useRef([]),m=Ee(),x=be(),i=E((u,l=y.Hidden)=>{let o=s.current.findIndex(({el:a})=>a===u);o!==-1&&(re(l,{[y.Unmount](){s.current.splice(o,1)},[y.Hidden](){s.current[o].state="hidden"}}),x.microTask(()=>{var a;!I(s)&&m.current&&((a=r.current)==null||a.call(r))}))}),R=E(u=>{let l=s.current.find(({el:o})=>o===u);return l?l.state!=="visible"&&(l.state="visible"):s.current.push({el:u,state:"visible"}),()=>i(u,y.Unmount)}),p=n.useRef([]),v=n.useRef(Promise.resolve()),g=n.useRef({enter:[],leave:[]}),$=E((u,l,o)=>{p.current.splice(0),t&&(t.chains.current[l]=t.chains.current[l].filter(([a])=>a!==u)),t?.chains.current[l].push([u,new Promise(a=>{p.current.push(a)})]),t?.chains.current[l].push([u,new Promise(a=>{Promise.all(g.current[l].map(([T,P])=>P)).then(()=>a())})]),l==="enter"?v.current=v.current.then(()=>t?.wait.current).then(()=>o(l)):o(l)}),j=E((u,l,o)=>{Promise.all(g.current[l].splice(0).map(([a,T])=>T)).then(()=>{var a;(a=p.current.shift())==null||a()}).then(()=>o(l))});return n.useMemo(()=>({children:s,register:R,unregister:i,onStart:$,onStop:j,wait:v,chains:g}),[R,i,s,$,j,g,v])}let se=n.Fragment,ae=ge.RenderStrategy;function Fe(e,t){var r,s;let{transition:m=!0,beforeEnter:x,afterEnter:i,beforeLeave:R,afterLeave:p,enter:v,enterFrom:g,enterTo:$,entered:j,leave:u,leaveFrom:l,leaveTo:o,...a}=e,[T,P]=n.useState(null),c=n.useRef(null),f=le(e),oe=te(...f?[c,t,P]:t===null?[]:[t]),G=(r=a.unmount)==null||r?y.Unmount:y.Hidden,{show:w,appear:K,initial:Q}=Te(),[C,B]=n.useState(w?"visible":"hidden"),V=ye(),{register:M,unregister:k}=V;N(()=>M(c),[M,c]),N(()=>{if(G===y.Hidden&&c.current){if(w&&C!=="visible"){B("visible");return}return re(C,{hidden:()=>k(c),visible:()=>M(c)})}},[C,c,M,k,w,G]);let W=J();N(()=>{if(f&&W&&C==="visible"&&c.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[c,C,W,f]);let de=Q&&!K,Y=K&&w&&Q,X=n.useRef(!1),L=ie(()=>{X.current||(B("hidden"),k(c))},V),Z=E(_=>{X.current=!0;let O=_?"enter":"leave";L.onStart(c,O,H=>{H==="enter"?x?.():H==="leave"&&R?.()})}),q=E(_=>{let O=_?"enter":"leave";X.current=!1,L.onStop(c,O,H=>{H==="enter"?i?.():H==="leave"&&p?.()}),O==="leave"&&!I(L)&&(B("hidden"),k(c))});n.useEffect(()=>{f&&m||(Z(w),q(w))},[w,f,m]);let ce=!(!m||!f||!W||de),[,h]=fe(ce,T,w,{start:Z,end:q}),he=we({ref:oe,className:((s=xe(a.className,Y&&v,Y&&g,h.enter&&v,h.enter&&h.closed&&g,h.enter&&!h.closed&&$,h.leave&&u,h.leave&&!h.closed&&l,h.leave&&h.closed&&o,!h.transition&&w&&j))==null?void 0:s.trim())||void 0,...me(h)}),S=0;return C==="visible"&&(S|=F.Open),C==="hidden"&&(S|=F.Closed),h.enter&&(S|=F.Opening),h.leave&&(S|=F.Closing),b.createElement(A.Provider,{value:L},b.createElement(ve,{value:S},ne({ourProps:he,theirProps:a,defaultTag:se,features:ae,visible:C==="visible",name:"Transition.Child"})))}function Ne(e,t){let{show:r,appear:s=!1,unmount:m=!0,...x}=e,i=n.useRef(null),R=le(e),p=te(...R?[i,t]:t===null?[]:[t]);J();let v=ee();if(r===void 0&&v!==null&&(r=(v&F.Open)===F.Open),r===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[g,$]=n.useState(r?"visible":"hidden"),j=ie(()=>{r||$("hidden")}),[u,l]=n.useState(!0),o=n.useRef([r]);N(()=>{u!==!1&&o.current[o.current.length-1]!==r&&(o.current.push(r),l(!1))},[o,r]);let a=n.useMemo(()=>({show:r,appear:s,initial:u}),[r,s,u]);N(()=>{r?$("visible"):!I(j)&&i.current!==null&&$("hidden")},[r,j]);let T={unmount:m},P=E(()=>{var f;u&&l(!1),(f=e.beforeEnter)==null||f.call(e)}),c=E(()=>{var f;u&&l(!1),(f=e.beforeLeave)==null||f.call(e)});return b.createElement(A.Provider,{value:j},b.createElement(U.Provider,{value:a},ne({ourProps:{...T,as:n.Fragment,children:b.createElement(ue,{ref:p,...T,...x,beforeEnter:P,beforeLeave:c})},theirProps:{},defaultTag:n.Fragment,features:ae,visible:g==="visible",name:"Transition"})))}function Pe(e,t){let r=n.useContext(U)!==null,s=ee()!==null;return b.createElement(b.Fragment,null,!r&&s?b.createElement(z,{ref:t,...e}):b.createElement(ue,{ref:t,...e}))}let z=D(Ne),ue=D(Fe),Se=D(Pe),He=Object.assign(z,{Child:Se,Root:z});const Me=(e,t)=>e.data.autogenerate.type==="home"?`/${t}`:e.data.autogenerate.enabled?`/${t}/events/${e.data.slug||e.id}`:`/${t}/pages/${e.data.slug||e.id}`,Ie=e=>{const[t,r]=n.useState(!1),s=n.useMemo(()=>e.pages.find(i=>i.data.autogenerate.type==="home")?.id,[e.pages]),m=n.useMemo(()=>`/${e.baseUrl}/tags`===e.url.pathname,[e.baseUrl,e.url]),x=i=>m?!1:!e.slug&&i.id===s?!0:e.slug&&e.slug===i.data.slug;return d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>r(!t),type:"button",children:d.jsx(Ce,{className:"w-8 h-8"})}),t&&d.jsx("div",{className:"absolute top-0 left-0 h-dvh w-dvw",onClick:()=>r(!1)}),d.jsx(He,{show:t,children:d.jsxs("div",{className:"shadow absolute top-0 left-0 h-dvh w-80 bg-white w-10 transition duration-200 ease-in-out data-[closed]:-translate-x-full text-black text-sm overflow-y-auto",children:[d.jsx("div",{className:"flex w-full h-24 justify-end px-8",children:d.jsx("button",{type:"button",onClick:()=>r(!1),children:d.jsx($e,{className:"w-8 h-8"})})}),e.pages.map(i=>d.jsx("a",{href:Me(i,e.baseUrl),children:d.jsx("div",{className:"p-4 hover:bg-blue-hover",children:d.jsx("p",{className:`${x(i)?"font-bold":""} ${i.data.parent?"ml-6":""}`,title:i.data.title,children:i.data.title},i.id)})},i.id)),d.jsx("a",{href:`/${e.baseUrl}/tags`,children:d.jsx("div",{className:"p-4 hover:bg-blue-hover",children:d.jsx("p",{className:m?"font-bold":"",children:"Index"})})})]})})]})};export{Ie as default};
