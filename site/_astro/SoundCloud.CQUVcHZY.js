import{r as d,R as c}from"./index.DNi1g-pO.js";import{g as m,c as f,b as y}from"./Player.BisSOn0-.js";import"./jsx-runtime.B6N9iRLn.js";import"./index.B7xmebis.js";import"./index.iExtbhlT.js";import"./store.aycOQVLs.js";import"./index.BDWyZ8Gq.js";import"./player.ChVRuTep.js";import"./play-fill.Dg1rRlI0.js";var P=Object.defineProperty,g=(s,t,r)=>t in s?P(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,e=(s,t,r)=>(g(s,typeof t!="symbol"?t+"":t,r),r);const b="https://w.soundcloud.com/player/api.js",R="SC";class o extends d.Component{constructor(){super(...arguments),e(this,"callPlayer",f),e(this,"duration",null),e(this,"currentTime",null),e(this,"fractionLoaded",null),e(this,"mute",()=>{this.setVolume(0)}),e(this,"unmute",()=>{this.props.volume!==null&&this.setVolume(this.props.volume)}),e(this,"ref",t=>{this.iframe=t})}componentDidMount(){this.props.onMount&&this.props.onMount(this)}load(t,r){m(b,R).then(n=>{if(!this.iframe)return;const{PLAY:a,PLAY_PROGRESS:l,PAUSE:p,FINISH:u,ERROR:h}=n.Widget.Events;r||(this.player=n.Widget(this.iframe),this.player.bind(a,this.props.onPlay),this.player.bind(p,()=>{this.duration-this.currentTime<.05||this.props.onPause()}),this.player.bind(l,i=>{this.currentTime=i.currentPosition/1e3,this.fractionLoaded=i.loadedProgress}),this.player.bind(u,()=>this.props.onEnded()),this.player.bind(h,i=>this.props.onError(i))),this.player.load(t,{...this.props.config.options,callback:()=>{this.player.getDuration(i=>{this.duration=i/1e3,this.props.onReady()})}})})}play(){this.callPlayer("play")}pause(){this.callPlayer("pause")}stop(){}seekTo(t,r=!0){this.callPlayer("seekTo",t*1e3),r||this.pause()}setVolume(t){this.callPlayer("setVolume",t*100)}getDuration(){return this.duration}getCurrentTime(){return this.currentTime}getSecondsLoaded(){return this.fractionLoaded*this.duration}render(){const{display:t}=this.props,r={width:"100%",height:"100%",display:t};return c.createElement("iframe",{ref:this.ref,src:`https://w.soundcloud.com/player/?url=${encodeURIComponent(this.props.url)}`,style:r,frameBorder:0,allow:"autoplay"})}}e(o,"displayName","SoundCloud");e(o,"canPlay",y.soundcloud);e(o,"loopOnEnded",!0);export{o as default};
